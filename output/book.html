<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>The Very Basics of Ruby</title>
    <link type="text/css" rel="stylesheet" href="assets/css/bootstrap.css"/>
    <style>
      body {
        background-color: #f6f6f6;
        padding-top: 30px;
      }
      .main {
        background-color: #fff;
        border: 1px solid #CCC;
        padding: 40px;
      }
      .container {
        width: 1100px;
      }
      .nav-list {
        font-size: 17px;
      }
      .nav-header {
        font-size: 17px;
        text-transform: none;
        line-height: 30px;
      }
    </style>
    <link type="text/css" rel="stylesheet" href="assets/css/bootstrap-responsive.css"/>
    <link type="text/css" rel="stylesheet" href="assets/css/pilcrow.css"/>
    <link type="text/css" rel="stylesheet" href="assets/css/hljs-github.min.css"/>
    <link type="text/css" rel="stylesheet" href="assets/css/book.css"/>
  </head>
<body>

  <div class="container-fluid">
    <div class="row-fluid">
      <div class="span3"><ul class="nav nav-list">
    <li><a href="#the-very-basics-of-ruby">The Very Basics of Ruby</a></li>
    <li><a href="#introduction">Introduction</a></li>
    <li><a href="#why-yet-another-tutorial-">Why yet another tutorial?</a></li>
    <li><a href="#notations-used">Notations used</a></li>
    <li><a href="#tools">Tools</a></li>
    <li><a href="#data-types">Data types</a></li>
    <li><a href="#wrapping-up">Wrapping up</a></li>
    <li><a href="#acting-in-an-intelligent-fashion">Acting in an intelligent fashion</a></li>
    <li><a href="#of-things-true-and-false">Of things True and False</a></li>
    <li><a href="#wrapping-up">Wrapping up</a></li>
    <li><a href="#repeating-things">Repeating things</a></li>
    <li><a href="#wrapping-up">Wrapping up</a></li>
    <li><a href="#functions-schmunctions">Functions schmunctions</a></li>
    <li><a href="#wrapping-up">Wrapping up</a></li>
    <li><a href="#what-next-">What next?</a></li>
    <li><a href="#exercises">Exercises</a></li>
</ul>
      </div>
      <div class="span9 main"><h1 id="the-very-basics-of-ruby"><a class="header-link" href="#the-very-basics-of-ruby"></a>The Very Basics of Ruby</h1>
<h2 id="introduction"><a class="header-link" href="#introduction"></a>Introduction</h2>
<p>Welcome to the wonderful world of Programming!</p>
<p>Programming is all about <strong>abstracting complex</strong> things. While there are
practically no limits to what one can accomplish with programming, even the
most complex ones contain components that consist of more simple components,
until the component deals with just basic language primitives.</p>
<p>Those basic primitives are things that every program contains, and quite
complex things can be done easily by using just those.</p>
<h3 id="why-yet-another-tutorial-"><a class="header-link" href="#why-yet-another-tutorial-"></a>Why yet another tutorial?</h3>
<p>There are several better tutorials, but I find even the shortest of those tag
too long. <a href="http://mislav.uniqpath.com/poignant-
guide/book/chapter-1.html">Why The Lucky Stiff&#39;s</a> is an excellent one and far from dry, but it&#39;s long
(still recommend it though!).</p>
<p>My attempt is to cover the least amount of knowledge to begin programming,
trusting that missing parts are easily explained when needed. So, lets get
started!</p>
<h3 id="notations-used"><a class="header-link" href="#notations-used"></a>Notations used</h3>
<p>By default, anything that looks like</p>
<pre class="hljs"><code><span class="hljs-comment"># somefile.rb</span>
puts <span class="hljs-string">"Howdy"</span> <span class="hljs-comment"># here we have some Ruby code</span></code></pre><p>is something you can type into Ruby interpreter. That is, open up a
terminal and type <code>pry</code> or <code>irb</code>.</p>
<p><strong>irb</strong> stands for &quot;interactive Ruby interpreter&quot; and allows you to try out code
immediately. Pry is a tool that makes working with irb much more nice, has
fancy colours and whatnot. From now on I&#39;ll assume you use Pry, but you can
use irb if you like.</p>
<div class="tip">
Sometimes there are tips like this. You can skip these when reading for the first time, but
they often contain useful information you might want to check at least later.
</div>

<p>If the code can be tried as-is, I&#39;ll write suggested filename to the top of
the file, like <code>somefile.rb</code> above. You may use any name you wish, but you need
to take that into account when you try running the examples.</p>
<p>Anything that looks like</p>
<blockquote>
<p>cd projects/ruby-tutorial</p>
</blockquote>
<p>is meant to be typed into the terminal, that is, not in irb or pry. Don&#39;t worry, &#39;$&#39; will not be copied if you
want to copy-paste the string.</p>
<p>You also might want to keep three windows open: one editor window, and two
terminal windows in the same directory. The other terminal would then have pry
open, whereas from the other you could run code written in the editor. This
way you don&#39;t need to open and reopen things all the time.</p>
<h3 id="tools"><a class="header-link" href="#tools"></a>Tools</h3>
<p>You only need Ruby for this. Any version at or greater than 1.9.3 should be
ok, though 2.2 and is recommended. You can find out your version by typing</p>
<blockquote>
<p>ruby -v</p>
</blockquote>
<p>TBD: installation of pry, link to install script</p>
<h2 id="data-types"><a class="header-link" href="#data-types"></a>Data types</h2>
<p>All programs consist of two things: <em>data</em> and <em>functions</em> that do stuff
with that data. Let&#39;s look at a very simple program that has both of these
elements and does something when it is executed.</p>
<pre class="hljs"><code><span class="hljs-comment"># hello.rb</span>
puts <span class="hljs-string">"Oh my, cinnamon buns!"</span>

puts <span class="hljs-string">"Kittens are "</span> + <span class="hljs-string">" so fluffy"</span>
puts <span class="hljs-string">"moar kittens in examples!"</span>.upcase</code></pre><p>Data is just information, like text, numbers, images, videos. It does not do
nothing by itself. Even simple text needs to printed for someone to be able to
read it. Here the <strong>string</strong> <code>&quot;Oh my, cinnamon buns!&quot;</code> is the data, as well as
<code>&quot;Kittens are &quot;</code>, <code>&quot;so fluffy&quot;</code> and so on. <code>puts</code> is the function that <em>does
something with data</em>, which is just printing whatever is fed to the function.
<code>upcase</code> is also a kind of function, acting on the string itself.</p>
<p>While the first example just prints a string, the second joins (or
<em>concatenates</em>) two strings together by using <code>+</code> operator (in Ruby that&#39;s
also a function!). Note that I needed to add trailing space to the string
<code>&quot;Kittens are &quot;</code>, otherwise it would have printed <code>Kittens areso fluffy</code>.</p>
<p>The last part prints something to the screen in rather demanding manner, due
to <code>upcase</code> function that is &quot;tied&quot; to strings.</p>
<p>Also note that you can have either zero or any number of blank lines between
lines of Ruby code. Use blank lines to group things logically, just like in
writing human languages. Ruby does not care: you could write all Ruby programs
in one really long line if you wanted, but readability is for humans; machine
doesn&#39;t care. Clarity is important. I added one blank line after the first example
as it is something that does not do anything to strings except print it; the two
after it are a bit more complex, though still simple.</p>
<p>If you wrote that in editor, try it out by saying</p>
<blockquote>
<p>ruby hello.rb</p>
</blockquote>
<p>Note that when you pass string data to Ruby in your code, you need to surround
it with double (<code>&quot;</code>) or single (<code>&#39;</code>) quotes. For now it doesn&#39;t matter which, but
try to be consistent.</p>
<p><strong>Numbers</strong> are also very common. Actually there are several types of numbers to
deal with certain issues, but we don&#39;t need to care about those yet. For
example:</p>
<pre class="hljs"><code><span class="hljs-comment"># numbers.rb</span>
puts <span class="hljs-number">1</span> + <span class="hljs-number">2</span>

<span class="hljs-comment"># Note: it's (30 / 3) + 4, not 30 / (3 + 4). Just like you learned at school.</span>
puts <span class="hljs-number">30</span> / <span class="hljs-number">3</span> + <span class="hljs-number">4</span>

puts <span class="hljs-number">10</span> / <span class="hljs-number">3.0</span>    <span class="hljs-comment"># 3.3333333...</span>
puts <span class="hljs-number">10</span> / <span class="hljs-number">3</span>      <span class="hljs-comment"># Note: integral division because all numbers are integral!</span></code></pre><p>As before, given you have a terminal open in the same directory, save the file in the editor and run</p>
<blockquote>
<p>ruby numbers.rb</p>
</blockquote>
<p>Now we know there are numbers and strings. What about things that have many of
those? Well, we have lists. Or more precisely we talk of <em>arrays</em> in Ruby. You
can do lots of things with those, and they are at the very core of almost all
programs:</p>
<pre class="hljs"><code><span class="hljs-comment"># arrays.rb</span>
some_stuff = [<span class="hljs-string">'kitten'</span>, <span class="hljs-string">'dog'</span>, <span class="hljs-string">'llama'</span>]

puts some_stuff        <span class="hljs-comment"># prints each string to its own line</span>
puts some_stuff.length <span class="hljs-comment"># 3, as there are 3 things in the list</span>

 <span class="hljs-comment"># almost all programming languages use 0-based indexes, so first</span>
 <span class="hljs-comment"># array element is at 0!</span>
puts some_stuff[<span class="hljs-number">0</span>]     <span class="hljs-comment"># kitten</span>
puts some_stuff[<span class="hljs-number">1</span>]     <span class="hljs-comment"># dog</span>
puts some_stuff[<span class="hljs-number">2</span>]     <span class="hljs-comment"># llama</span>
puts some_stuff[-<span class="hljs-number">1</span>]    <span class="hljs-comment"># -1 means last index, -2 the one before last etc</span>

puts some_stuff.sort   <span class="hljs-comment"># prints dog, kitten and llama in that order</span>

<span class="hljs-comment"># Arrays in Ruby can contain mixed things</span>
puts [<span class="hljs-string">'dog'</span>, <span class="hljs-number">42</span>].length

<span class="hljs-comment"># Yow dawg, heard you like arrays so I put array in your array</span>
not_even_funny = [<span class="hljs-number">2</span>, <span class="hljs-string">'bananas'</span>, [<span class="hljs-number">4</span>, <span class="hljs-number">5</span>]]
<span class="hljs-comment"># puts both 4 and 5, as last element is array [4, 5]</span>
puts not_even_funny[-<span class="hljs-number">1</span>]</code></pre><p>By now you have probably guessed that Ruby ignores every line beginning with <code>#</code>. Yup.
They are <em>comments</em>, meant for human readers.</p>
<p>OK. So now we can have <em>strings</em>, <em>numbers</em> and <em>arrays</em>, and we have even seen some
functions. But why some of them appear before date, like <code>puts</code>, and some after, like
<code>length</code>? The latter is an example of a <em>method</em>, which you could think of like a function
that is closely tied with data. However, at this point it doesn&#39;t matter much
whether you talk about functions or methods. Both act on data, transforming it,
storing it somewhere else (like writing a file), calculate things etc.</p>
<p>There was something else too. That <code>some_stuff</code> is a <em>variable</em>. You use them
to give shorter, descriptive names to things that are longer to type or
relatively expensive to compute. But arguably the most common reason to use
those is to give things descriptive names. Consider the following:</p>
<pre class="hljs"><code><span class="hljs-constant">User</span>.all.select { |u| !u.admin? &amp;&amp; u.created_at &gt;= <span class="hljs-constant">Time</span>.now - <span class="hljs-number">7</span>.days }.each <span class="hljs-keyword">do</span> |u|
  puts u
<span class="hljs-keyword">end</span></code></pre><p>Unless the reader is quite familiar with Ruby and Rails, it is not easy to see
what is actually printed. Next consider the version that splits up that a bit,
using hopefully more human-readable variable names:</p>
<pre class="hljs"><code>min_creation_time = <span class="hljs-constant">Time</span>.now - <span class="hljs-number">7</span>.days
recent_non_admins = <span class="hljs-constant">User</span>.all.select { |u| !u.admin? &amp;&amp; u.created_at &gt;=  min_creation_time }

recent_non_admins.each <span class="hljs-keyword">do</span> |user|
  puts user
<span class="hljs-keyword">end</span></code></pre><p>There are even better ways to make that more descriptive or elegant, but we
don&#39;t have tools for that yet. However, we already gained something important:
<code>recent_normal_users</code> communicates to the reader that this variable holds
actually a list of users that are not administrators. If you need to change
how users are printed, then you may safely ignore ther more involved
expression of getting those users, knowing know what it does. You only need to
focus on the printing part.</p>
<p>Also note that to introduce a new variable, you simply write that variable and
assign a value to it. Some languages require you to declare those separately,
but in Ruby, you just start using those by assigning them to stuff. In Ruby,
you always assign things to labels by using the equal symbol <code>=</code>.</p>
<p>Computer programs are hard to write, but they are often even harder to read,
even your own code. Even after few weeks or so it is easy to lose track of how
a particular piece of code works. Some say you should comment your code, but
even more important is to write readable code. Problem with comments is that
code interpreters and compilers <em>ignore those</em>, and they get easily outdated.
Ideal code is self-documenting using descriptive names for variables and
functions. While comments are sometimes the best way to explain things to the
reader, they are seldom needed if you name things well.</p>
<p>Can you use any names for things, then? In practice, yes. All variable names
are totally arbitrary. While <code>a</code> or <code>z</code> are not very descriptive names, they
are valid names for variables. So is</p>
<p><code>a_really_funny_kissa_with_hayfever_danced_over_the_shiny_rainbow</code>.</p>
<p>Anything consisting of letters a to z, numbers and underscore &#39;_&#39; goes. The only
constraint is that you cannot start it with a number. So <code>kitteh_42</code> is a
valid variable name, while <code>42_kitteh</code> isn&#39;t.</p>
<p>Same rules apply for your own methods and functions.</p>
<div class="tip">
<p>
In Ruby, you should use underscore to separate words in variable names, and
always use downcase letters. UPCASE and SoCalledCamelCase is reserved for constants, classes and
other things we&#39;ll talk about later.</p>

<p>You <em>could</em> also use Finnish to name things if you like, which actually works
nowadays due to UTF character set being common. So, you can actually use
variable names like <code>ämpäri</code>, which was not that possible only few years back,
and is still impossible with some languages. It doesn&#39;t mean you <em>should</em> do
that, though. However, English is <em>lingua franca</em> of computing, and using any
other language to name things will be frowned upon. Others will look at
you with that, you know, face. With a stiff upper lip.</p>

<p>Even though it could be argued that using non-Eglish names for things that you
write makes it more apparent what comes from language and standard libraries,
and what is your own code. I&#39;d still recommend against it. Just stick to English.</p>
</div>


<h3 id="wrapping-up"><a class="header-link" href="#wrapping-up"></a>Wrapping up</h3>
<p>So, now we know -- or at least have seen -- three things:</p>
<ol class="list">
<li>Data. There are different types of if, and we have seen three of those:<ul class="list">
<li>Strings</li>
<li>Numbers</li>
<li>Arrays, which can contain any data structures, including other arrays[^fn-array]</li>
</ul>
</li>
<li>Methods to do things with the data<ul class="list">
<li>In the example above, we used <em>array methods</em> to get the length of the array with <code>length</code>,
and <code>sort</code> to get array contents in alphabetic order. <code>upcase</code> converted string to upper case.</li>
<li>We will talk more about methods a bit later.</li>
</ul>
</li>
<li>We quickly glanced at variables that are just short, descriptive labels for things</li>
</ol>
<h2 id="acting-in-an-intelligent-fashion"><a class="header-link" href="#acting-in-an-intelligent-fashion"></a>Acting in an intelligent fashion</h2>
<p>Imagine you are programming a robot that needs to brew and serve coffee. With
some cream, cinnamon and chocolate chips with a tad of sugar frosting on the
top.</p>
<p>Also imagine I was actually able to actually draw pictures, and here would
be an artsy, nice picture of a jolly good robot pouring a hot cup of Old Joe.
So there.</p>
<p>With the picture in your head, imagine you had programmed the robot to pour
exactly 80cl of coffee and 40cl of cream to each cup. The code might look roughly
like this:</p>
<pre class="hljs"><code>bot = <span class="hljs-constant">Robot</span>.new(<span class="hljs-string">"Jeeves the Valiant Valet"</span>)

bot.pour_coffee(<span class="hljs-number">800</span>) <span class="hljs-comment"># Our robot uses millilitres as the basic unit for fluds</span>
bot.spray_whipped_cream(<span class="hljs-number">400</span>)
bot.sprinkle_chocolate_chips(<span class="hljs-number">5</span>) <span class="hljs-comment"># grams maybe</span>
bot.sprinkle_cinnamon(<span class="hljs-number">1</span>) <span class="hljs-comment"># still grams (what's LD50 for cinnamon???)</span>
bot.frost_with_sugar</code></pre><p>Given everything is ok, our metallic friend would happily crank and whirr
about, making the delicious serving. All fine so far.</p>
<p>Now imagine some poor hapless fellow would accidentally bump the coffee cup so
that it would no longer be under the Robot&#39;s coffee-pouring nozzles. Then all
that scalding hot stuff would end up in the floor, messing your carpet. Or
even worse, it might end up hurting that furry
<a href="http://www.scottishfoldlove.com/">Scottish Fold</a> of yours :( What can we do?</p>
<p>In order to avoid further feline mishaps, we need to have some sort way for
doing things <em>conditionally</em>. Given condition, do this. Otherwise do that.</p>
<p>All programming languages have some sort of means to do that. There are even
several means of doing that, most common being the <code>if</code> statement:</p>
<pre class="hljs"><code><span class="hljs-keyword">if</span> &lt;condition&gt;
  <span class="hljs-comment"># code to execute when condition is true</span>
<span class="hljs-keyword">else</span>
  <span class="hljs-comment"># code to execute when code is NOT true</span>
<span class="hljs-keyword">end</span></code></pre><p>Note that the notation <code>&lt;stuff&gt;</code> means that <code>stuff</code> should not be written
literally, but with appropriate expression. Here it should be some Ruby code
that is equal to value <code>false</code>.</p>
<p>Let&#39;s assume all the functions our robot Jeeves uses to fill the cup
take advantage of a single utility function <code>inject</code>:</p>
<pre class="hljs"><code>nozzle.inject(<span class="hljs-string">'coffee'</span>, <span class="hljs-symbol">amount:</span> <span class="hljs-number">800</span>, <span class="hljs-symbol">manner:</span> <span class="hljs-string">'pour'</span>)
nozzle.inject(<span class="hljs-string">'cream'</span>, <span class="hljs-symbol">amount:</span> <span class="hljs-number">400</span>, <span class="hljs-symbol">manner:</span> <span class="hljs-string">'spray'</span>)</code></pre><p>To avoid accitents, all our methods would need to detect if the cup is no
longer under the nozzle. So we would edit the <code>inject</code> method for nozzles as
follows:</p>
<pre class="hljs"><code><span class="hljs-function"><span class="hljs-keyword">def</span> </span>inject(substance, options)
  ...
  <span class="hljs-keyword">if</span> sensors.cup_detected?
    actually_inject_stuff(substance, options)
  <span class="hljs-keyword">else</span>
    system.alert(<span class="hljs-string">"Please do set your favorite container of hot beverages "</span>
                 <span class="hljs-string">"to appropriate position and alignment"</span>)
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span></code></pre><p>Now we have fixed the problem! If <code>sensors.cup_detected?</code> has the value
<code>true</code>, it calls <code>actuall_inject_stuf</code>. Otherwise it alerts the user. But we
did not <em>quite</em> fix it yet. Why?</p>
<p>If the cup is moved during the <code>actually_inject_stuff</code> call we won&#39;t detect
that, because we check <code>sensors.cup_detected?</code> only just before we start
injecting stuff. But at least we check it now just before each phase.</p>
<h3 id="of-things-true-and-false"><a class="header-link" href="#of-things-true-and-false"></a>Of things True and False</h3>
<div class="tip">
<code>nil</code> simply means a <em>lack of a value</em>. For example, getting the first
element of an empty array returns nil in Ruby, as all expressions need to return <em>something</em>.
</div>

<p>I mentioned before that <code>if</code> executes the first section only if the condition
is true. What is true, then? In Ruby, anything that is equal to <code>false</code> or <code>nil</code>.</p>
<p>Maybe one of the most common way to get a value that is <code>true</code> or <code>false</code> is
by comparing things. Like any programming language, Ruby gives us many ways to
do just that, and return a respective value:</p>
<pre class="hljs"><code><span class="hljs-comment"># conditions.rb</span>
<span class="hljs-number">2</span> &lt; <span class="hljs-number">3</span>          <span class="hljs-comment"># true</span>
<span class="hljs-number">3</span> &lt; <span class="hljs-number">3</span>          <span class="hljs-comment"># false</span>
<span class="hljs-number">40</span> &gt;= <span class="hljs-number">38</span> + <span class="hljs-number">2</span>   <span class="hljs-comment"># true</span>
<span class="hljs-string">'banana'</span> == <span class="hljs-number">4</span>     <span class="hljs-comment"># false, note the double '==' sign</span>
<span class="hljs-string">'cat'</span> == <span class="hljs-string">'cat'</span>    <span class="hljs-comment"># true</span>
<span class="hljs-string">'cat'</span> == <span class="hljs-string">'feline'</span> <span class="hljs-comment"># false</span>
<span class="hljs-string">'cat'</span> == <span class="hljs-string">'Cat'</span>    <span class="hljs-comment"># false</span>
<span class="hljs-string">'cute kitten'</span> == <span class="hljs-string">'cute '</span> + <span class="hljs-string">'kitten'</span> <span class="hljs-comment"># true</span></code></pre><div class="tip">
Often you will hear the term &quot;boolean&quot; when talking about things that are true
or false. That is due to a logician George Boole, and computer scientists
often talk about &quot;Boolean logic&quot;. We will talk more about that too, when we
get to more complex conditions.
</div>

<p>The reason why both <code>40 &gt;= 38 + 2</code> and <code>&#39;cute kitten&#39; == &#39;cute &#39; + &#39;kitten&#39;</code>
work is because they don&#39;t compare the <em>literal code</em> you typed, but Ruby
<em>evaluates</em> the code in the both sides of the comparison operator, like <code>==</code>
or <code>&gt;</code>.</p>
<p>Almost any valid code you write in Ruby is an <em>expression</em> (or list of several
expressions), and that expression has a value, when it is evaluated. For
example, value of a simple expression <code>2</code> is just <code>2</code>. Value of <code>&#39;kitten&#39;</code> is
<code>&#39;kitten&#39;</code>, as well with any other literal values. Expression like <code>38 + 2</code>
<em>evaluates</em> to 40, so it is equal to value <code>40</code>. Same for <code>&#39;cute &#39; + &#39;kitten&#39;</code>
that evaluates to <code>&#39;cute kitten&#39;</code>.</p>
<p>A good way to get familiar with expressions is to toy with things in Pry.
Now go ahead and compare some things to get a taste of using comparison
operators. Note also that every individual line you write is an expression,
and things you get back prom Pry are <em>values</em> of those expressions, computed by Ruby!</p>
<h3 id="wrapping-up-1"><a class="header-link" href="#wrapping-up-1"></a>Wrapping up</h3>
<p>In normal languages we talk about &quot;programming the microwave&quot; or &quot;programmable
washing machine&quot;. In this context it&#39;s not precisely programming, but merely
setting up or <em>sequencing</em> some actions, that are always executed in exactly
the same way.</p>
<p>When we talk about computers, we need basically three things in order to be
able to do <strong>anything</strong> (and by anything, I really mean anything that is
theoretically possible):</p>
<ol class="list">
<li>Do stuff in sequence. Doing some task first, then some other tasks.</li>
<li>Do something conditionally. Given this, do this. Otherwise, do something else</li>
<li>Repetition</li>
</ol>
<p>Think about this a bit: what the washing machine user interface
should allow you to do, if it was truly programmable?</p>
<p>Next we will talk about the missing third part.</p>
<h2 id="repeating-things"><a class="header-link" href="#repeating-things"></a>Repeating things</h2>
<p>Imagine you have a list things to do, and you want to format those nicely when printing:</p>
<pre class="hljs"><code><span class="hljs-comment"># todo.rb</span>
todo_list = [<span class="hljs-string">'clean up the kitchen'</span>, <span class="hljs-string">'buy some milk'</span>, <span class="hljs-string">'make time for learning Ruby'</span>, <span class="hljs-string">'consider acquiring a kitten'</span>]

<span class="hljs-comment"># remember that indexes start from zero</span>
puts <span class="hljs-string">"TODO item: "</span> + todo_list[<span class="hljs-number">0</span>]
puts <span class="hljs-string">"TODO item: "</span> + todo_list[<span class="hljs-number">1</span>]
puts <span class="hljs-string">"TODO item: "</span> + todo_list[<span class="hljs-number">2</span>]
puts <span class="hljs-string">"TODO item: "</span> + todo_list[<span class="hljs-number">3</span>]</code></pre><p>That code would print all the items, but it sure looks awkward. It&#39;s
repetitive, and imagine what it would look like if there are 100 entries.
Surely we can do better.</p>
<p>In Ruby, all data types that <em>contain</em> stuff (CS folks talk about
<em>collections</em> or things you can <em>iterate</em> over) support method <code>each</code>. Arrays
are collections of things, so we can replace the code above with a much cleaner
version:</p>
<pre class="hljs"><code><span class="hljs-comment"># todo2.rb</span>
todo_list = [<span class="hljs-string">'clean up the kitchen'</span>, <span class="hljs-string">'buy some milk'</span>, <span class="hljs-string">'make time for learning Ruby'</span>, <span class="hljs-string">'consider acquiring a kitten'</span>]

todo_list.each <span class="hljs-keyword">do</span> |entry|
  puts <span class="hljs-string">"TODO item: "</span> + entry
<span class="hljs-keyword">end</span></code></pre><p>Don&#39;t worry about funny pipe characters (&#39;|&#39;) yet. First consider the
benefits: due to the loop we don&#39;t need to care about array size. That code
would work with list containing only one entry, with list containing
100000000000 entries and even an empty list; it would just print nothing.</p>
<p>Now let&#39;s talk about the syntax a bit. It&#39;s not that hard, once you get used
to it. Another example:</p>
<pre class="hljs"><code><span class="hljs-comment"># countdown.rb</span>
put <span class="hljs-string">"countdown started"</span>
[<span class="hljs-number">5</span>, <span class="hljs-number">4</span>, <span class="hljs-number">3</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>].each <span class="hljs-keyword">do</span> |n|
  puts n
<span class="hljs-keyword">end</span>
puts <span class="hljs-string">"go!"</span></code></pre><p>That <code>do</code> starts a <em>block</em>. A Ruby block is just, well, blob of code like any
other ruby code. The interesting stuff is between pipes. Ruby automatically
passes <em>each item</em> (yeah, that&#39;s why the name) in the collection to that block
in turn, assigning it to the given variable name, and executes that block <em>for
each entry</em>. So, here <code>puts</code> is called five times, with <code>n</code> being assigned
to each of the numbers in turn.</p>
<p>There are other kinds of loops, though they are maybe not that common. However, the
idea is not to present all of those here, only the most common and useful ones.</p>
<p>One very important loop has the ability to both repeat and check a condition
every time before it starts a new iteration.  It&#39;s kind of like <code>each</code> with steroids.
Enter <code>while</code>:</p>
<pre class="hljs"><code><span class="hljs-comment"># while.rb</span>
start_time = <span class="hljs-constant">Time</span>.now
<span class="hljs-keyword">while</span> (<span class="hljs-constant">Time</span>.now - start_time) &lt; <span class="hljs-number">3</span>
  puts <span class="hljs-string">"I should really learn this Ruby stuff."</span>
  sleep <span class="hljs-number">0</span>.<span class="hljs-number">5</span>
<span class="hljs-keyword">end</span></code></pre><p>Can you guess what it does? First it gets the current time, and stores that to
variable <code>start_time</code>. Then it loops over until difference between current
time and <code>start_time</code> is at least 3 (<code>start_time</code> does not change, while <code>Time.now</code>
returns a different value every time, because it returns the current time).</p>
<p>Put more simply, it repeats the loop for 3 seconds, sleeping half a second
after each print.</p>
<p>Note that it does not matter for <code>while</code> what the condition is. Remember that in Ruby,
anything is true except things that reduce to <code>false</code> or <code>nil</code>.  The condition
could compare water level in a reservoir if it is below certain limit. It
could check if there is enough tuna for Fluffy the Cat. It could check the
periapsis for current orbital trajectory, or whatever. The only thing that matters
is the value of the evaluated condition.</p>
<p>Here are some exercises: for each line, think if it would evaluate as true (in <code>if</code> or <code>while</code> context).</p>
<pre class="hljs"><code><span class="hljs-number">2</span> == <span class="hljs-number">2</span>
<span class="hljs-string">'cat'</span> == <span class="hljs-string">"cat"</span>
<span class="hljs-string">'dog'</span> != <span class="hljs-string">'cat'</span>
<span class="hljs-number">1</span> &lt; <span class="hljs-number">0</span>
<span class="hljs-number">3</span> == <span class="hljs-number">3.0</span>
<span class="hljs-string">'false'</span>
<span class="hljs-keyword">false</span>
<span class="hljs-string">''</span>
<span class="hljs-keyword">nil</span>
[]
<span class="hljs-number">0</span>
[<span class="hljs-keyword">false</span>]</code></pre><p>It is important to understand that while loop iterates over the code between
<code>while</code>... <code>end</code> as long as condition is true. The condition is re-checked
<em>every time</em> after it reaches the last line in while, and jumps back to the
beginning, and only then. The loop will not be aborted if the  condition
somehow would change during the execution of while body. Also note that the
loop <em>will repeat indefinitely</em> if the condition never becomes false. For
example, this code never terminates:</p>
<pre class="hljs"><code><span class="hljs-keyword">while</span> <span class="hljs-keyword">true</span>
  puts <span class="hljs-string">"repeating this ad infinitum"</span>
  sleep <span class="hljs-number">0</span>.<span class="hljs-number">2</span>
<span class="hljs-keyword">end</span></code></pre><p>The only way to end the program is by terminating it by force. Fortunately,
you can do this simply by pressing <code>CTRL+C</code> in the terminal .Try that if you like.</p>
<div class="tip">
<p>People sometimes use the terms &quot;programming&quot; and &quot;coding&quot; in a mixed
manner. For example, HTML is not strictly programming, though it can called
<em>coding</em>. You cannot have conditionals in HTML, nor can you repeat things.</p>

<p>It is also somewhat of a stretch to say that any part of HTML is about &quot;acting&quot; or &quot;executing&quot;, but
one could think of say, <em>title</em> element being a &quot;function&quot; to show the document title. Sort
of. But you should at least cringe a bit when saying that. This misconception probably because
you can insert (embed) programming languages to HTML, but that part is not then HTML. It&#39;s programming language code.</p>
</div>

<p>Now you should take a deep breath, as we have reached a very important
milestone: you know all the concepts required to code <em>any kind of computer
program</em>. Ever. Neat, huh? Some programs would be hard with this information
only, but they would be doable.</p>
<p>We have actions like calculating things, joining strings, assigning values to
variables. We have the ability to make decisions based on values of things.
And we have the ability to repeat stuff.</p>
<h3 id="wrapping-up-2"><a class="header-link" href="#wrapping-up-2"></a>Wrapping up</h3>
<p>We now learned of the last part, repetition. We had two kinds of loops:</p>
<ol class="list">
<li><code>each</code> we can use with any collection, not needing to know how many items there are</li>
<li><code>while</code> that allows repeating things by checking a condition first before each pass</li>
</ol>
<p>Technically you could do any looping with <code>while</code>, but <code>each</code> is more
convenient and less verbose when you have a collection to process.</p>
<p>Go get a nice, warm cup of your favorite beverage now! You&#39;ve deserved it.
Maybe ponder all this stuff a bit. Also please pet your doggy dog or cat if you
have one. Patting a horse is ok too.</p>
<p>[^fn-array] Yeah, there&#39;s no limit to nesting. You could have [1, [2, 3], [4, [[5], [6]]]] and there are actually use cases for even more complex situations.</p>
<h2 id="functions-schmunctions"><a class="header-link" href="#functions-schmunctions"></a>Functions schmunctions</h2>
<p>Like mentioned before, functions are means of doing things with data. They can
be very simple (like joining two strings together) or highly complex, and
naturally functions can call other functions.</p>
<p>Many functions are built-in to the language, and huge amount of useful
functions are in the so-called <em>standard library</em> grouped by category. Things
like getting current time, working with files, reading contents of a web page,
convert things from format into another, manage concurrency, compute
trigonometric functions, compress things so that they take less space and so
on. I encourage you to look at <a href="http://www.rubydoc.info/stdlib">Rubydoc stdlib page</a>
to get an idea of things you have at your disposal, without installing any
software (that is, your Ruby installation already has all that stuff).</p>
<p>Usually functions are introduced by doing arithmetic with numbers. Let&#39;s
change that now by doing things with strings. In particular, lets make a
function that returns the  longest string in a list, and let&#39;s first write a
small program to find out <em>how we wish it would work</em>.</p>
<pre class="hljs"><code><span class="hljs-comment"># longest_string.rb</span>
<span class="hljs-comment"># Note that this won't work yet, as the function is not yet defined</span>
puts longest_string([<span class="hljs-string">'apple'</span>, <span class="hljs-string">'banana'</span>, <span class="hljs-string">'mango'</span>, <span class="hljs-string">'pear'</span>]) <span class="hljs-comment"># 'banana'</span>
puts longest_string([])     <span class="hljs-comment"># nil -- that is, when list is empty, return nothing</span>

<span class="hljs-comment"># let's define our function so that it returns the first string if there</span>
<span class="hljs-comment"># are several that are equally long</span>
puts longest_string([<span class="hljs-string">'dog'</span>, <span class="hljs-string">'cat'</span>]) <span class="hljs-comment"># 'dog'</span></code></pre><p>Now on to the definition. This is a simple function, but there are still
rather many details in our code. Let&#39;s look at it:</p>
<pre class="hljs"><code><span class="hljs-comment"># longest_string.rb</span>

<span class="hljs-comment"># (type this definition above test code we wrote in previous step)</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> </span>longest_string(ary)
  longest = ary[<span class="hljs-number">0</span>] <span class="hljs-comment"># assign variable `longest` to first value in the array</span>

  <span class="hljs-comment"># go through array `ary`, assign each item to variable `s`</span>
  <span class="hljs-comment"># in turn</span>
  ary.each <span class="hljs-keyword">do</span> |s|
    <span class="hljs-keyword">if</span> s.length &gt; longest.length
      longest = s
    <span class="hljs-keyword">end</span>
  <span class="hljs-keyword">end</span>

  longest
<span class="hljs-keyword">end</span></code></pre><p>Syntax for defining functions is quite simple. In the most basic form, you
write <code>def</code> followed by <em>function name</em>, all the <em>parameters</em> (input values)
it needs to work in parentheses, and finish the definition with <code>end</code>.</p>
<p>Pay attention to indentation. You see total of 3 <code>end</code> markers here, but due
to indentation you can see that the first one closes the <code>if</code> condition, the
second closes the <code>each</code> block and the last closes the function definition.</p>
<p>Let&#39;s look at the definition more closely. After initializing the longest
variable with the first string, we compare each of the strings in <code>ary</code> to
<code>longest</code>, or more precisely their <em>lengths</em>.</p>
<p>Only if a new string is longer than the one we have stored so far, we
overwrite longest to be that string. After checking all the strings with
<code>each</code>, we return the value <code>longest</code>.</p>
<p>By the way, it does_ work with empty lists as intended. Can you guess why?</p>
<p>Functions and methods in Ruby automatically return the last value in the
method body to the <em>caller</em>, so</p>
<p><code>puts longest_string([&#39;apple&#39;, &#39;banana&#39;, &#39;mango&#39;, &#39;pear&#39;])</code></p>
<p>really prints out &quot;banana&quot;; that is, you could <em>substitute</em> here the
function call <code>longest_string([&#39;apple&#39;, &#39;banana&#39;, &#39;mango&#39;, &#39;pear&#39;])</code>
with the value <code>&quot;banana&quot;</code>, and from the callers (<code>puts</code>) point of view
your program would work exactly the same.</p>
<p>Let&#39;s look at another function, just to get the feel of it:</p>
<pre class="hljs"><code><span class="hljs-constant">BAD_LANGUAGES</span> = [<span class="hljs-string">'java'</span>, <span class="hljs-string">'php'</span>, <span class="hljs-string">'basic'</span>, <span class="hljs-string">'perl'</span>, <span class="hljs-string">'c++'</span>, <span class="hljs-string">'pascal'</span>, <span class="hljs-string">'mumps'</span>]
<span class="hljs-constant">OK_LANGUAGES</span> = [<span class="hljs-string">'ruby'</span>, <span class="hljs-string">'python'</span>, <span class="hljs-string">'c'</span>, <span class="hljs-string">'scala'</span>, <span class="hljs-string">'clojure'</span>]

<span class="hljs-function"><span class="hljs-keyword">def</span> </span>opinion_on(language)
  lang = language.downcase
  <span class="hljs-keyword">if</span> <span class="hljs-constant">BAD_LANGUAGES</span>.<span class="hljs-keyword">include</span>?(lang)
    <span class="hljs-string">"Uh-oh. You don't want to do this"</span>
  <span class="hljs-keyword">elsif</span> <span class="hljs-constant">OK_LANGUAGES</span>.<span class="hljs-keyword">include</span>?(lang)
    <span class="hljs-string">"You're in a good company"</span>
  <span class="hljs-keyword">else</span>
    lang + <span class="hljs-string">", huh? You must be weird. Or really, really awesome!"</span>
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span></code></pre><p>Here we defined a function that takes a single argument. By the way, copy-paste
that to Pry and try calling that without any arguments, with two arguments, and
single number. Go on, it won&#39;t do any harm, but you&#39;ll learn useful stuff.
Read the messages Ruby kindly tells you.</p>
<p>There are two things worth mentioning here. <strong>The first</strong> is that we introduced
<em>constants</em> that our function uses to make the function itself a bit shorter
and hopefully more readable. Constants are exactly like variables, with one
crucial difference: <em>you cannot change their value after initial assignment</em>.
That&#39;s why they are called constants. They serve several purposes, one of
which is to give descriptive names to things like here. The other is to define
something in one place only.</p>
<p>Fox example, imagine you had a program that computes salaries, deducts taxes
and all that stuff. Boring, I know. But imagine there was this magic number 22
repeating all over. If that depicts VAT (how would the reader know?) and it
would change, you should check all the code for occurrences of that digit 22.
Even worse, 22 might appear somewhere <em>without meaning the same thing</em>, that
is, it would be totally unrelated to VAT percent 22.</p>
<p>Fortunately, that kind of situations are easy to avoid. Just declare a
constant <code>VAT = 22</code>, and you can then use just <code>VAT</code> whenever you want to
say 22, meaning the value added tax, not just any number 22. If it needs to be changed,
you only need to change it in that one place.</p>
<div class="tip">
Programmers talk sometimes about <code>magic numbers</code>. They are arbitrary numbers in code
with meaning that is not immediately obvious to the reader. Good rule of thumb
could be that if in doubt, replace the number with constant. Especially if the same
number with the same meaning appears in the code more than once.
</div>

<p><strong>Another thing</strong> to note is the use of <code>elsif</code>. So <code>if</code> can not only choose between two &quot;execution paths&quot;,
it can have several. It is evaluated from the bottom to top, and if any of the conditions
evaluates to true, that &quot;branch&quot; is executed, and nothing else.</p>
<p>Also note that <code>else</code> branch is optional, but often it is better to make that explicit.
So that the reader does not need to think if it has been forgotten. Consider this code:</p>
<pre class="hljs"><code><span class="hljs-function"><span class="hljs-keyword">def</span> </span>evaluate_situation(threat_level)
  <span class="hljs-keyword">if</span> threat_level == <span class="hljs-string">'critical'</span>
    <span class="hljs-string">"FIRE ZE MISSLES!1!one11!"</span>
  <span class="hljs-keyword">elsif</span> threat_level == <span class="hljs-string">'I am le tired'</span>
    <span class="hljs-string">"well have a nap, THEN FIRE ZE MISSLES!"</span>
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span></code></pre><p>Now play with that a bit to see how it works, at least by calling it with
&quot;critical&quot; (that is, type <code>evaluate_situation(&quot;critical&quot;)</code> in Pry).</p>
<p>Suppose we call the function <code>evaluate_situation(&quot;ok&quot;)</code>. What does it return?</p>
<p>Some would argue a proper language would throw a syntax error for <code>if</code> without <code>else</code>.
Ruby does not, though, and it <em>implies</em> an else-part with <code>nil</code>. It is <em>exactly equivalent</em>,
that is, in more mathematical terms &quot;just the same stuff&quot; as this:</p>
<pre class="hljs"><code><span class="hljs-function"><span class="hljs-keyword">def</span> </span>evaluate_situation(threat_level)
  <span class="hljs-keyword">if</span> threat_level == <span class="hljs-string">'critical'</span>
    <span class="hljs-string">"FIRE ZE MISSLES!1!one11!"</span>
  <span class="hljs-keyword">elsif</span> threat_level == <span class="hljs-string">'I am le tired'</span>
    <span class="hljs-string">"well have a nap, THEN FIRE ZE MISSLES!"</span>
  <span class="hljs-keyword">else</span>
    <span class="hljs-keyword">nil</span>
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span></code></pre><p>Some people consider the last version unnecessarily verbose, but I like it more. I don&#39;t need
to think if <code>else</code> was forgotten by accident. Instead I&#39;ll trust that ok, if <code>threat_level</code>
is anything else than &quot;critical&quot; or &quot;I am le tired&quot; it returns nil.</p>
<h3 id="wrapping-up-3"><a class="header-link" href="#wrapping-up-3"></a>Wrapping up</h3>
<p>We read a bit more about functions, especially how to <em>define</em> those instead
of just using them. That&#39;s where the short keyword <code>def</code> comes from (computer
scientists are lazy. I mean.. it saves all <em>three</em> (3) key strokes!).</p>
<div class="tip">
What use is a function without input? Some examples include <code>Time.now</code> which returns current time
(try it!), <code>rand</code> that returns a random decimal between [0..1] and several others.
</div>

<p><code>def</code> is followed by the name of the function, and you supply any parameters
(input) in parenthesis <code>()</code>, if the function has any. Finally you end the
definition with <code>end</code>.</p>
<p>Note how calling the function is rather similar to defining it. If you first think how the function
should behave</p>
<pre class="hljs"><code>get_me_some_ice_cream(<span class="hljs-string">'Ben &amp; Jerry'</span>, <span class="hljs-string">'Chunky Monkey'</span>)</code></pre><p>it is easy then to find out how the function definition starts:</p>
<pre class="hljs"><code><span class="hljs-function"><span class="hljs-keyword">def</span> </span>get_me_some_ice_cream(brand, flavor)
  ...
<span class="hljs-keyword">end</span></code></pre><p>Now is a good time to fire up Pry, and try writing some simple functions and call those to see how they work.
Some suggestions:</p>
<ul class="list">
<li>function to find out if a string is a palindrome. For the purpose of this exercise, &#39;foof&#39; is a palindrome even though it likely means nothing</li>
<li>function to convert inches to cents, and vise versa</li>
<li>function to find out if a string is too short (specify the limit yourself)</li>
<li>function to compute BMI. BMI is defined as <em>mass divided by square of length</em> (mass in kilograms, length in meters)</li>
<li>function to find out distance between two points</li>
<li>function to find out if a given number is prime (intermediate)</li>
</ul>
<h2 id="what-next-"><a class="header-link" href="#what-next-"></a>What next?</h2>
<p>Ruby has lots of nice stuff <em>builtin</em>, <a href="http://phrogz.net/programmingruby/builtins.html">here nicely grouped by category</a>. You don&#39;t need to learn any of that by heart, but I really recommend you to read at least casually through following classes to see what you can do with those:</p>
<ul class="list">
<li><a href="http://phrogz.net/programmingruby/ref_c_array.html#Array">Array</a></li>
<li><a href="http://phrogz.net/programmingruby/ref_c_string.html#String">String</a></li>
<li><a href="http://phrogz.net/programmingruby/ref_c_hash.html#Hash">Hash</a></li>
<li><a href="http://phrogz.net/programmingruby/ref_c_file.html#File">File</a></li>
<li><a href="http://phrogz.net/programmingruby/ref_c_dir.html#Dir">Dir</a></li>
<li><a href="http://phrogz.net/programmingruby/ref_c_time.html#Time">Time</a></li>
</ul>
<p>Pay attention to <code>mixins</code> declaration in those classes. To put it short, it means that the class &quot;mixes in&quot; all mentioned methods. For example, both <code>Array</code> and <code>Hash</code> mix in <code>sort</code> from module <code>Enumerable</code>, which
is why you can say things like <code>[2, 1, 4].sort</code> (example for sorting Array).</p>
<h2 id="exercises"><a class="header-link" href="#exercises"></a>Exercises</h2>
<p>Programming is a skill you build gradually like any other. As such, even more
complex programs can be started by doing a  very much simplified version first. My
attempt here is to build a certain solution, which starts very simple. You
can try it ouf if you like, and see how far you can go. Note that this is also
<em>how professionals create actual software</em>, with the exception that they would likely
skip the very first few steps -- except when they start developing in a new
language (you&#39;d be surprised how &quot;naive&quot; version they often start with though!)</p>
<div class="tip">

Refactoring means simply changing the code in such a manner that externally
the code <em>behaves exactly the same way</em>, but the implementation is <em>better</em>.
By better I mean such things as the code is more readable, does not contain
lots of repetition, no large functions or methods that do lots of things,
individual things are more simple etc.

One of the most common refactorings is <em>extracting a method</em> (or function), so that
a more involved function becomes more simple, and simply calls the extracted method
to implement some detail. For more comprehensive list of common refactorings, see eg.
<a href="http://refactoring.com/catalog/">http://refactoring.com/catalog/</a>
</div>

<p>After each few steps, remember to <em>refactor</em> the code.</p>
<p>Build a program that</p>
<ol class="list">
<li>reads contents of a file that has some numbers in it, each in it&#39;s own line, and prints it out.</li>
<li>writes some number to a new file.</li>
<li>appends (writes to the end) some number to a file. Note that you want newlines between each number.</li>
<li>reads all numbers in a file and prints the sum of those numbers</li>
<li>reads a number from command line, writes current date time (with seconds) and that number to a file. Separate time and number by semicolon `;&#39;</li>
<li>Add command line parameter to differentiate between whether you want to add value or show stuff (defaulting to show), and also for the filename to use. &#39;show&#39; will just print all lines. From this on, all versions that display stuff should do that with &#39;show&#39;.</li>
<li><p>given number of entries in a file, prints out average (mean) of those numbers. You can use the following data
for testing:</p>
<pre class="hljs"><code> 2015<span class="hljs-tag">-09-02</span> 22<span class="hljs-pseudo">:23</span><span class="hljs-pseudo">:00</span>;70
 2015<span class="hljs-tag">-09-03</span> 14<span class="hljs-pseudo">:58</span><span class="hljs-pseudo">:14</span>;63
 2015<span class="hljs-tag">-09-04</span> 16<span class="hljs-pseudo">:01</span><span class="hljs-pseudo">:25</span>;35</code></pre><p> Your program should print <code>56.0</code>. Use some other filename to avoid overwriting your own data, and skip blank lines.</p>
</li>
<li>prints latest entry date, value of entry and average for last 5 entries (or all, if there are less)</li>
<li>handles situations like<ul class="list">
<li>file does not exist (for show, with add it creates the file if doesn&#39;t exist)</li>
<li>file exists but is empty</li>
<li>file contains invalid data (skip it, but tell the user what the invalid line was). Note that <code>.to_i</code> and <code>.to_f</code> silently convert any non-numeric strings to 0! <code>Integer(val)</code> and <code>Float(val)</code> behave in more sane manner.</li>
</ul>
</li>
<li>prints latest entry date and value, with averages for last 3, 5 and 15 entries</li>
<li>has modules or classes. At this point everything is mixed together, while clearly some deal
with just transforming data, some with user entries and some with actual logic. Remember <em>separation of concerns</em>.</li>
<li>treats multiple entries for one day as one, using average of all those as value</li>
<li>interpolates values for missing days. Say, if for <code>day 1</code> value was <code>10</code> and for <code>day 3</code> it is <code>12</code>,
assume <code>day 2</code> to have value <code>11</code>.</li>
<li>has <a href="http://rspec.info/">unit test</a>. We are doing serious stuff here, so you want to be certain that your old stuff still
works when you make changes.</li>
<li>prints all the data as in step 9, but now including weekly and monthly change. For example, if
we have entry for current date and it&#39;s value is 100, and last week ago it was 240, then weekly change
is 140 (negative)</li>
<li><p>as in previous step, but now including <strong>projected values</strong> after one week, at the end of month and after one month. Estimate this using recent rate (eg. last 3 days) and longer interval (eg. 14 days). In projections, indicate both. So the program could print</p>
<pre class="hljs"><code> Projected estimates:
    Using <span class="hljs-keyword">last</span> <span class="hljs-number">3</span> days:
       - <span class="hljs-keyword">after</span> <span class="hljs-constant">one</span> week: <span class="hljs-number">80.3</span>
       - <span class="hljs-keyword">at</span> <span class="hljs-operator">the</span> <span class="hljs-function"><span class="hljs-keyword">end</span> <span class="hljs-title">of</span> <span class="hljs-title">month</span>: <span class="hljs-title">78</span>.<span class="hljs-title">0</span></span>
       - <span class="hljs-keyword">after</span> <span class="hljs-constant">one</span> month: <span class="hljs-number">75.5</span>
    Using <span class="hljs-keyword">last</span> <span class="hljs-number">14</span> days:
       - <span class="hljs-keyword">after</span> <span class="hljs-constant">one</span> week: <span class="hljs-number">82.5</span>
       - <span class="hljs-keyword">at</span> <span class="hljs-operator">the</span> <span class="hljs-function"><span class="hljs-keyword">end</span> <span class="hljs-title">of</span> <span class="hljs-title">month</span>: <span class="hljs-title">79</span>.<span class="hljs-title">6</span></span>
       - <span class="hljs-keyword">after</span> <span class="hljs-constant">one</span> month: <span class="hljs-number">79.2</span></code></pre></li>
<li><p>can track multiple types of entries, each entry type in it&#39;s own file (use custom directory for the
code and separate directory for data files)</p>
</li>
<li>has a web interface for entering and checking the data. Use eg. Ruby on Rails and <a href="http://chartkick.com/">Chartkick</a> or similar to show projections / averages graphically with actual data .</li>
</ol>
<p>Now you have built a nice, general-purpose <em>linear estimator</em>. You can use that to track your weight, money usage / savings, running speed, electric bill.. anything that can be measured and represented as single
number per day. Neat, huh :)</p>
      </div>
    </div>
  </div>

  <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script type="text/javascript" src="assets/js/bootstrap.min.js"></script>
</body>
</html>
